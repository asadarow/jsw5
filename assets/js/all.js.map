{"version":3,"sources":["all.js"],"names":["data","axios","get","then","response","renderCard","renderC3","list","document","querySelector","result","resultlength","newData","totalObj","forEach","item","area","undefined","Object","keys","ary","push","chart","c3","generate","bindto","columns","type","colors","donut","title","filter","addEventListener","e","target","value","tempData","btn","fname","imgurl","price","count","star","memo","addform","length","alert","obj","id","name","imgUrl","description","group","rate","reset","renderData","str","resultstr","innerHTML"],"mappings":"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","file":"all.js","sourcesContent":["let data=[];\n// 搜尋結果\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n.then(function (response) {\n  data=response.data.data;\n  renderCard(data);\n  renderC3(data);\n});\n\nconst list=document.querySelector(\".result-list\");\nconst result=document.querySelector(\".search-result\");\nlet resultlength=0;\n// 更新圖表\nfunction renderC3(data){\n  let newData=[];\n  let totalObj ={};\n  data.forEach(function(item){\n    if(totalObj[item.area]==undefined){\n      totalObj[item.area]=1;\n    }else{\n      totalObj[item.area]++;\n    }\n  });\n  Object.keys(totalObj).forEach(function(item){\n    let ary=[];\n    ary.push(item);\n    ary.push(totalObj[item]);\n    newData.push(ary);\n  })\n  let chart = c3.generate({\n    bindto: '#chart',\n    data: {\n      columns: newData,\n      type:\"donut\",\n      colors:{\n        \"高雄\":\"#E68618\",\n        \"台中\":\"#5151D3\",\n        \"台北\":\"#26BFC7\"\n      }\n    },\n    donut: {\n      title: \"套票地區比重\"\n    }\n  });\n};\n// 篩選條件\nconst filter=document.querySelector(\".filter\");\nfilter.addEventListener(\"click\",function(e){\n  data.forEach(function(item){\n    if(e.target.value==\"全部地區\"){\n      renderCard(data);\n    }else if(e.target.value==item.area){\n      let tempData =[];\n      data.forEach(function (item) {\n        if (e.target.value==item.area)tempData.push(item);\n      });\n      renderCard(tempData);\n    }\n  })\n})\n// 新增資料\nconst btn = document.querySelector(\".btn\");\nconst fname = document.querySelector(\"#fname\");\nconst imgurl = document.querySelector(\"#imgurl\");\nconst area = document.querySelector(\".country\");\nconst price = document.querySelector(\"#price\");\nconst count = document.querySelector(\"#count\");\nconst star = document.querySelector(\"#star\");\nconst memo = document.querySelector(\"#memo\");\nconst addform=document.querySelector(\".addform\");\nbtn.addEventListener(\"click\",function(e){\n  if(fname.value.length<1){\n    alert(\"請填寫套票名稱\");\n  }else if(imgurl.value.length<=1){\n    alert(\"請填寫圖片網址\");\n  }else if(area.value===\"\"){\n    alert(\"請選擇景點地區\");\n  }else if(price.value<1){\n    alert(\"套票金額請填寫大於1的數字\");\n  }else if(count.value<1){\n    alert(\"套票組數請填寫大於1的數字\");\n  }else if(star.value<1|| star.value>10){\n    alert(\"套票星級請填寫1到10之間的數字\");\n  }else if(memo.value.length<1){\n    alert(\"請填寫套票描述\");\n  }else{\n    let obj={};\n    obj.id=data.length;\n    obj.name = fname.value;\n    obj.imgUrl=imgurl.value;\n    obj.area=area.value;\n    obj.description=memo.value;\n    obj.group=count.value;\n    obj.price=price.value;\n    obj.rate=star.value;\n    data.push(obj);\n    resultlength++;\n    alert(\"新增成功!\");\n    renderCard(data);\n    renderC3(data);\n    filter.value=\"全部地區\";\n    addform.reset();\n  }\n})\n// 渲染卡片\nfunction renderCard(renderData){\n  let str=\"\";\n  let resultstr=\"\";\n  renderData.forEach(function(item){\n    str+=`<li class=\"card\"><div class=\"cover\"><p class=\"area\">${item.area}</p><p class=\"score\">${item.rate}</p><a href=\"#\"><img src=${item.imgUrl} alt=\"#\"></a></div><div class=\"content\"><div class=\"depiction\"><h2>${item.name}</h2><p>${item.description}</p></div><div class=\"purchase\"><p><span class=\"material-icons\">error</span>剩下最後 ${item.group} 組</p><h3><span>TWD</span>$${item.price}</h3></div></div></li>`;\n    list.innerHTML = str;\n  });\n  resultlength=renderData.length;\n  resultstr+=`本次搜尋共 ${resultlength} 筆資料`\n  result.innerHTML = resultstr;\n}\n\n"]}